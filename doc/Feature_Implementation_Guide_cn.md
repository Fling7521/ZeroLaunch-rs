# 常见功能的实现方法

## 有一些不会被使用的程序被添加了

常见的，不会被使用的程序有：
* 各类程序的卸载程序
* 各类程序的帮助文档

这程序已经默认添加到屏蔽关键字中，而如果有一些没有被包括的程序也被添加了，可以通过以下的方式完成程序的屏蔽：
1. 打开设置界面
2. 点击“程序搜索”
3. 点击“设置屏蔽关键字”
4. 点击“添加项目”
5. 输入要屏蔽的程序
6. 点击“保存配置文件”，程序会自动保存当前的配置并重新加载配置

只要程序中出现了关键字，则直接屏蔽，所以写入 `help` 时，可以直接将所有的 `xxx help` 程序全部屏蔽

## 更改了安装路径的程序没有被检测到

程序会遍历默认安装路径下的所有的应用，如果有自定义安装的路径没有被检测到，可以通过以下的方式添加
1. 打开设置界面
2. 点击“程序搜索”
3. 点击“设置遍历路径”
4. 点击“添加项目”
5. 将安装目录添加并设置对应的遍历深度
6. 点击“保存配置文件”，程序会自动保存当前的配置并重新加载配置

可能的问题：[什么是遍历深度](#什么是遍历深度)

## 添加文件/网址/命令（可自定义打开windows设置与各类控制台）

1. 打开设置界面
2. 点击“其他搜索”
3. 点击对应的标签页
4. 完成添加
5. 点击“保存配置文件”，程序会自动保存当前的配置并重新加载配置

可能的问题：[什么是关键字](#什么是关键字)

添加windows设置的方法：使用命令：`explorer.exe ms-settings:[目标]`，可以在网上查到`ms-settings`支持的设置。以显示设置为例：`explorer.exe ms-settings:display`。

添加各类控制台：使用` Get-ChildItem -Path C:\Windows\system32\* -Include *.msc | Sort-Object -Property Extension | Select-Object -Property Name | Format-Wide -Column 1`可看到支持的控制台。使用命令：`mmc [目标控制台]`。以本地策略编辑器 `gpedit.msc` 为例：使用命令：`mmc gpedit.msc`

## 对搜索算法的微调怎么做

首先要对这个搜索算法的处理流程做一定的了解。推荐配合着代码看，对应的代码实现在`src-tauri/src/modules/program_manager/mod.rs`，更新搜索算法的函数为`update`。

这个搜索算法的核心思路是，对于用户的输入，每一个程序都有一个“匹配值”，而这个匹配值表示用户预期目标为当前程序的可能性。匹配值越大，则表示用户的目标程序越有可能是当前的程序。所以程序的结果栏显示的也是所有程序中匹配值最大的几个。

一个程序的匹配值由以下几个部分组成：字符串匹配值 + 固定权重 + 动态权重。
* 字符串匹配值：由用户输入的字符串与搜索关键字计算而来（固定变化）。
* 固定权重：用户设置的目标程序的固定权重（用户决定）。
* 动态权重：根据历史启动次数计算而来（动态变化）。

而用户可以更改**固定权重**的值。注意，固定权重的赋值与**屏蔽关键字**一样。

更改其值的方式如下所示：
1. 打开设置界面
2. 点击“程序搜索”
3. 点击“设置固定偏移量”
4. 点击“添加项目”
5. 设置对应的值
6. 点击“保存配置文件”

## 配置文件保存地址的更换

### 更换本地保存路径

1. 打开设置界面
2. 点击“远程管理”
3. 点击“本地存储”
4. 点击“选择路径”按钮
5. 选择你要保存的文件夹，选择成功后则自动保存到目标路径
6. 点击“测试连接”
7. 点击“保存配置”

程序在测试时，会在目标文件夹下创建一个测试文件，可手动删除

### 使用 WebDAV 协议连接网盘

这里以坚果云作为演示

1. 打开设置界面
2. 点击“远程管理”
3. 点击“WebDAV”
4. 打开坚果云官网：`https://www.jianguoyun.com/#/safety`
5. 点击“添加应用”获得应用密码

![坚果云](../asset/坚果云.png)

6. 输入对应的信息
7. 点击“测试连接”
8. 点击“保存配置”

# 可能的问题

## 什么是关键字？

关键字可以理解为是搜索算法查找对应项的唯一标识。

## 什么是遍历深度？

使用下图来表示：以选择了 `C:\Program Files\` 为例，depth = 5。

```
初始路径：C:\Program Files\ (深度5层)
├── App1/              ✔️ 索引（第1层）
│   └── Subfolder/     ✔️ 索引（第2层）
│       ├── Config/    ✔️ 索引（第3层）
│       └── Cache/     ✔️ 索引（第3层）
└── App2/
    └── Components/
        └── Plugins/
            └── Legacy/
                └── Layer5/    ✔️ 索引（第5层）
                    └── Layer6 ❌ 忽略（超出深度）
```

## 程序崩了

程序的日志保存在了`C:\Users\[当前用户名]\AppData\Roaming\ZeroLaunch-rs`文件夹下，`logs`下保存着应用的启动日志与崩溃记录。

## 快捷键被占用了

打开系统托盘，找到 `ZeroLaunch-rs` 的缩略图，右击打开二级菜单栏，点击“重新注册快捷键”即可。